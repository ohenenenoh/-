<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>熊本 · 九州行前行李清單</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

  <style>
    :root {
      --food: #f97373;
      --clothes: #facc15;
      --stay: #60a5fa;
      --transport: #22c55e;
      --other: #a855f7;
    }

    body {
      background: #f5f3ec;
    }

    /* 手繪福岡背景（與前一版同風格） */
    .app-shell {
      min-height: 100vh;
      max-width: 480px;
      margin: 0 auto;
      position: relative;
      background:
        radial-gradient(circle at 20% 10%, rgba(248, 250, 252, 0.95) 0, transparent 55%),
        radial-gradient(circle at 80% 0%, rgba(96, 165, 250, 0.18) 0, transparent 60%),
        radial-gradient(circle at 0% 60%, rgba(244, 114, 182, 0.22) 0, transparent 55%),
        radial-gradient(circle at 100% 70%, rgba(52, 211, 153, 0.22) 0, transparent 55%),
        linear-gradient(135deg, #fdfcf7 0%, #f3f1e6 45%, #ebe6da 100%);
      overflow: hidden;
    }

    .app-shell::before {
      content: "";
      position: absolute;
      inset: -40px;
      background-image:
        radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 0),
        radial-gradient(circle, rgba(0, 0, 0, 0.02) 0.8px, transparent 0);
      background-size: 18px 18px, 32px 32px;
      opacity: 0.55;
      mix-blend-mode: multiply;
      pointer-events: none;
    }

    .app-shell::after {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 15% 75%, rgba(37, 99, 235, 0.18) 0, transparent 55%),
        conic-gradient(from 200deg at 90% 20%, rgba(15, 23, 42, 0.07), transparent 40%, rgba(15, 23, 42, 0.05), transparent 75%);
      opacity: 0.85;
      mask-image: radial-gradient(circle at 50% 50%, black 0, transparent 65%);
      pointer-events: none;
    }

    .muji-card {
      position: relative;
      background: #fbfbf7;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
      border-radius: 1.5rem;
      backdrop-filter: blur(6px);
    }

    .muji-card::before {
      content: "";
      position: absolute;
      inset: 6px;
      border-radius: 1.35rem;
      border: 1px dashed rgba(148, 163, 184, 0.6);
      opacity: 0.7;
      pointer-events: none;
    }

    .scrollbar-thin::-webkit-scrollbar {
      width: 4px;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb {
      background-color: rgba(156, 163, 175, 0.6);
      border-radius: 999px;
    }

    .tag-badge {
      padding: 0.18rem 0.6rem;
      border-radius: 999px;
      border-width: 1px;
      border-style: solid;
      font-size: 10px;
      line-height: 1.1;
      white-space: nowrap;
      background: #ffffffd0;
    }

    .tag-food { background-color: rgba(249, 115, 115, 0.15); color: #b91c1c; border-color: rgba(248, 113, 113, 0.65); }
    .tag-clothes { background-color: rgba(250, 204, 21, 0.18); color: #92400e; border-color: rgba(250, 204, 21, 0.7); }
    .tag-stay { background-color: rgba(96, 165, 250, 0.18); color: #1d4ed8; border-color: rgba(96, 165, 250, 0.7); }
    .tag-transport { background-color: rgba(34, 197, 94, 0.18); color: #166534; border-color: rgba(34, 197, 94, 0.7); }
    .tag-other { background-color: rgba(168, 85, 247, 0.16); color: #6b21a8; border-color: rgba(168, 85, 247, 0.7); }

    .pill-filter {
      border-radius: 999px;
      border-width: 1px;
      border-style: solid;
      border-color: rgba(148, 163, 184, 0.5);
      background: #ffffffba;
      padding: 0.25rem 0.8rem;
      font-size: 11px;
      white-space: nowrap;
    }

    .pill-filter-active {
      background: #0f172a;
      color: #f9fafb;
      border-color: transparent;
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.25);
    }
  </style>
</head>
<body class="antialiased text-neutral-900">
<div id="app" class="app-shell flex flex-col relative z-10">

  <!-- Top App Bar -->
  <header class="px-4 pt-5 pb-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div class="w-9 h-9 rounded-2xl bg-neutral-900 text-neutral-50 flex items-center justify-center text-xs tracking-[0.18em]">
        PACK
      </div>
      <div class="flex flex-col">
        <h1 class="text-base font-semibold tracking-wide text-neutral-900">
          熊本 · 九州行前清單
        </h1>
        <p class="text-[11px] text-neutral-600">
          行李檢查 · 食衣住行一次搞定
        </p>
      </div>
    </div>
    <button
      class="text-[11px] px-3 py-1 rounded-full border border-neutral-200 bg-white/80 text-neutral-700 shadow-sm"
      @click="resetAll"
    >
      清除勾選
    </button>
  </header>

  <!-- Segmented small tabs (檢查清單 / 小筆記) -->
  <div class="px-4 pb-3">
    <div class="bg-neutral-900/5 rounded-full p-1 flex text-[12px] border border-neutral-200/70">
      <button
        class="flex-1 py-1.5 rounded-full transition-colors"
        :class="viewMode === 'checklist' ? 'bg-white shadow-sm text-neutral-900' : 'text-neutral-500'"
        @click="viewMode = 'checklist'"
      >
        行前檢查清單
      </button>
      <button
        class="flex-1 py-1.5 rounded-full transition-colors"
        :class="viewMode === 'notes' ? 'bg-white shadow-sm text-neutral-900' : 'text-neutral-500'"
        @click="viewMode = 'notes'"
      >
        我的備註
      </button>
    </div>
  </div>

  <main class="flex-1 px-4 pb-5 space-y-4">

    <!-- 進度 + 類別篩選卡片 -->
    <section class="muji-card px-4 pt-4 pb-3">
      <div class="relative z-10 space-y-3">
        <div class="flex items-center justify-between">
          <div>
            <h2 class="text-sm font-semibold text-neutral-900 mb-1">打包進度</h2>
            <p class="text-[11px] text-neutral-500">
              已完成 {{ checkedCount }} / {{ totalCount }} 項（約 {{ progressPercent }}%）
            </p>
          </div>
          <div class="text-right">
            <button
              class="text-[10px] px-2 py-1 rounded-full bg-neutral-900 text-neutral-50 shadow-sm"
              @click="checkAllVisible(true)"
            >
              勾選篩選中
            </button>
            <button
              class="text-[10px] ml-1 px-2 py-1 rounded-full border border-neutral-300 bg-white/80 text-neutral-700"
              @click="checkAllVisible(false)"
            >
              取消篩選中
            </button>
          </div>
        </div>

        <!-- 進度條 -->
        <div class="w-full h-2.5 rounded-full bg-neutral-200/70 overflow-hidden">
          <div
            class="h-full rounded-full bg-gradient-to-r from-emerald-400 via-sky-400 to-indigo-500 transition-all duration-300"
            :style="{ width: progressPercent + '%' }"
          ></div>
        </div>

        <!-- 類別篩選 -->
        <div class="flex flex-wrap gap-2 text-[11px] text-neutral-700 mt-2">
          <button
            class="pill-filter"
            :class="filterCategory === 'all' ? 'pill-filter-active' : ''"
            @click="filterCategory = 'all'"
          >
            全部
          </button>
          <button
            class="pill-filter tag-food"
            :class="filterCategory === 'food' ? 'pill-filter-active' : ''"
            @click="filterCategory = 'food'"
          >
            食（餐食 · 零食）
          </button>
          <button
            class="pill-filter tag-clothes"
            :class="filterCategory === 'clothes' ? 'pill-filter-active' : ''"
            @click="filterCategory = 'clothes'"
          >
            衣（衣物）
          </button>
          <button
            class="pill-filter tag-stay"
            :class="filterCategory === 'stay' ? 'pill-filter-active' : ''"
            @click="filterCategory = 'stay'"
          >
            住（盥洗 · 睡眠）
          </button>
          <button
            class="pill-filter tag-transport"
            :class="filterCategory === 'transport' ? 'pill-filter-active' : ''"
            @click="filterCategory = 'transport'"
          >
            行（證件 · 交通）
          </button>
          <button
            class="pill-filter tag-other"
            :class="filterCategory === 'other' ? 'pill-filter-active' : ''"
            @click="filterCategory = 'other'"
          >
            其他（藥品 · 3C）
          </button>
        </div>
      </div>
    </section>

    <!-- 行前檢查清單 -->
    <section
      v-if="viewMode === 'checklist'"
      class="muji-card px-4 pt-4 pb-3"
    >
      <div class="relative z-10">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-sm font-semibold text-neutral-900">行李項目</h2>
          <span class="text-[11px] text-neutral-500">可自行新增 / 編輯</span>
        </div>

        <!-- 新增項目 -->
        <div class="flex items-center gap-2 mb-3 text-[11px]">
          <input
            v-model="newItemName"
            type="text"
            class="flex-1 rounded-full border border-neutral-300 bg-white/80 px-3 py-1.5 focus:outline-none focus:ring-1 focus:ring-neutral-500"
            placeholder="新增一個行李項目，如：保溫瓶"
            @keyup.enter="addItem"
          />
          <select
            v-model="newItemCategory"
            class="rounded-full border border-neutral-300 bg-white/80 px-2 py-1.5 text-[11px] focus:outline-none focus:ring-1 focus:ring-neutral-500"
          >
            <option value="food">食</option>
            <option value="clothes">衣</option>
            <option value="stay">住</option>
            <option value="transport">行</option>
            <option value="other">其他</option>
          </select>
          <button
            @click="addItem"
            class="rounded-full bg-neutral-900 text-neutral-50 px-3 py-1.5 text-[11px] shadow-sm"
          >
            加入
          </button>
        </div>

        <!-- 清單列表 -->
        <div class="max-h-[60vh] overflow-y-auto pr-1 scrollbar-thin">
          <div
            v-for="(group, gIndex) in groupedItems"
            :key="gIndex"
            class="mb-4 last:mb-2"
          >
            <div class="flex items-center justify-between mb-1">
              <div class="flex items-center gap-2">
                <span
                  class="tag-badge"
                  :class="categoryClass(group.category)"
                >
                  {{ categoryLabel(group.category) }}
                </span>
                <p class="text-[11px] text-neutral-500">
                  {{ group.items.filter(i => i.checked).length }} / {{ group.items.length }} 已勾
                </p>
              </div>
              <div class="flex items-center gap-1 text-[10px]">
                <button
                  class="px-2 py-0.5 rounded-full border border-neutral-300 bg-white/80"
                  @click="toggleGroup(group.category, true)"
                >
                  全選
                </button>
                <button
                  class="px-2 py-0.5 rounded-full border border-neutral-300 bg-white/80"
                  @click="toggleGroup(group.category, false)"
                >
                  全不選
                </button>
              </div>
            </div>

            <ul class="space-y-1.5">
              <li
                v-for="item in group.items"
                :key="item.id"
                class="flex items-center justify-between rounded-2xl border border-neutral-200 bg-white/80 px-3 py-2 text-[12px]"
              >
                <label class="flex items-center gap-2 flex-1">
                  <input
                    type="checkbox"
                    class="h-3.5 w-3.5 rounded border-neutral-300 text-neutral-900 focus:ring-neutral-700"
                    v-model="item.checked"
                  />
                  <span
                    class="transition-colors"
                    :class="item.checked ? 'line-through text-neutral-400' : 'text-neutral-800'"
                  >
                    {{ item.name }}
                  </span>
                </label>
                <button
                  class="ml-2 text-[11px] text-neutral-400 hover:text-red-500"
                  @click="removeItem(item.id)"
                >
                  刪除
                </button>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 備註模式 -->
    <section
      v-else
      class="muji-card px-4 pt-4 pb-4"
    >
      <div class="relative z-10 space-y-2">
        <h2 class="text-sm font-semibold text-neutral-900 mb-1">我的備註</h2>
        <p class="text-[11px] text-neutral-500">
          可記下匯率、入住時間、交通提醒等行前重點。
        </p>
        <textarea
          v-model="notes"
          rows="6"
          class="w-full rounded-2xl border border-neutral-300 bg-white/80 px-3 py-2 text-[12px] resize-none focus:outline-none focus:ring-1 focus:ring-neutral-500"
          placeholder="例如：\n・護照放在隨身包\n・第一天先換 20,000 日圓現金\n・回程要提前 2.5 小時到機場"
        ></textarea>
        <p class="text-[10px] text-neutral-400 text-right">
          文字會保留在此裝置瀏覽器記憶體中（未做雲端同步）。
        </p>
      </div>
    </section>
  </main>
</div>

<script>
const { createApp } = Vue;

createApp({
  data() {
    return {
      viewMode: 'checklist',
      filterCategory: 'all',
      notes: localStorage.getItem('packing_notes') || '',
      nextId: 1000,
      items: [
        // 食
        { id: 1, name: '保溫瓶 / 水壺', category: 'food', checked: false },
        { id: 2, name: '隨身零食（堅果、能量棒）', category: 'food', checked: false },
        { id: 3, name: '胃藥、消化錠', category: 'food', checked: false },

        // 衣
        { id: 10, name: '外套（防風、防雨）', category: 'clothes', checked: false },
        { id: 11, name: '上衣與褲子（依天數準備）', category: 'clothes', checked: false },
        { id: 12, name: '襪子與內衣褲', category: 'clothes', checked: false },
        { id: 13, name: '睡衣', category: 'clothes', checked: false },
        { id: 14, name: '帽子 / 圍巾 / 手套', category: 'clothes', checked: false },

        // 住
        { id: 20, name: '牙刷牙膏 / 牙線', category: 'stay', checked: false },
        { id: 21, name: '洗面乳 / 卸妝用品', category: 'stay', checked: false },
        { id: 22, name: '保養品（化妝水、乳液）', category: 'stay', checked: false },
        { id: 23, name: '隱形眼鏡與保養液', category: 'stay', checked: false },
        { id: 24, name: '小毛巾、洗澡用品', category: 'stay', checked: false },

        // 行
        { id: 30, name: '護照與影本', category: 'transport', checked: false },
        { id: 31, name: '身分證 / 健保卡', category: 'transport', checked: false },
        { id: 32, name: '機票 / 電子機票截圖', category: 'transport', checked: false },
        { id: 33, name: 'JR Pass / 車票 / IC 卡', category: 'transport', checked: false },
        { id: 34, name: '錢包（現金 / 信用卡）', category: 'transport', checked: false },
        { id: 35, name: '國內外駕照（若需開車）', category: 'transport', checked: false },

        // 其他
        { id: 40, name: '手機與充電線', category: 'other', checked: false },
        { id: 41, name: '行動電源', category: 'other', checked: false },
        { id: 42, name: '相機 / 記憶卡 / 充電器', category: 'other', checked: false },
        { id: 43, name: '日幣現金與兌換收據', category: 'other', checked: false },
        { id: 44, name: '常備藥（頭痛、感冒、過敏）', category: 'other', checked: false },
        { id: 45, name: '雨傘 / 折疊傘', category: 'other', checked: false },
        { id: 46, name: '口罩與酒精', category: 'other', checked: false }
      ],
      newItemName: '',
      newItemCategory: 'other'
    };
  },
  computed: {
    filteredItems() {
      if (this.filterCategory === 'all') {
        return this.items;
      }
      return this.items.filter(item => item.category === this.filterCategory);
    },
    groupedItems() {
      const groups = {};
      for (const item of this.filteredItems) {
        if (!groups[item.category]) {
          groups[item.category] = [];
        }
        groups[item.category].push(item);
      }
      return Object.keys(groups).map(cat => ({
        category: cat,
        items: groups[cat]
      }));
    },
    totalCount() {
      return this.items.length;
    },
    checkedCount() {
      return this.items.filter(i => i.checked).length;
    },
    progressPercent() {
      if (this.totalCount === 0) return 0;
      return Math.round((this.checkedCount / this.totalCount) * 100);
    }
  },
  watch: {
    notes(newVal) {
      localStorage.setItem('packing_notes', newVal);
    }
  },
  methods: {
    categoryClass(cat) {
      switch (cat) {
        case 'food': return 'tag-food';
        case 'clothes': return 'tag-clothes';
        case 'stay': return 'tag-stay';
        case 'transport': return 'tag-transport';
        case 'other': return 'tag-other';
        default: return '';
      }
    },
    categoryLabel(cat) {
      switch (cat) {
        case 'food': return '食';
        case 'clothes': return '衣';
        case 'stay': return '住';
        case 'transport': return '行';
        case 'other': return '其他';
        default: return cat;
      }
    },
    addItem() {
      const name = this.newItemName.trim();
      if (!name) return;
      this.items.push({
        id: this.nextId++,
        name,
        category: this.newItemCategory,
        checked: false
      });
      this.newItemName = '';
    },
    removeItem(id) {
      this.items = this.items.filter(i => i.id !== id);
    },
    toggleGroup(category, checked) {
      for (const item of this.items) {
        if (item.category === category && (this.filterCategory === 'all' || this.filterCategory === category)) {
          item.checked = checked;
        }
      }
    },
    checkAllVisible(checked) {
      for (const item of this.filteredItems) {
        item.checked = checked;
      }
    },
    resetAll() {
      for (const item of this.items) {
        item.checked = false;
      }
    }
  }
}).mount('#app');
</script>

</body>
</html>
